@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>

    <meta name="viewport" content="width=device-width" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-alpha1/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/access/css/login.css" />
    <title>Iniciar sesion - HelpTechAppWeb</title>

</head>
<body>

    <div class="loginbox">
        <img src="https://i.imgur.com/ZYzTdD0.png" class="avatar">

        <h1>Iniciar sesion</h1>

        <form id="frmCredentials">

            <p>Username</p> <input id="iptUsername" type="text" placeholder="Ingresar DNI" required autocomplete="off">
            <p>Password</p> <input id="iptPassword" type="password" placeholder="Ingresar contraseña" required autocomplete="off">

            <select id="sltRole">
                <option selected>Seleccione su roll</option>
                <option>TECNICO</option>
                <option>CONSUMIDOR</option>
            </select>

            <hr />

            <input id="iptLogin" type="submit" />
            <a id="btnUpdateCode">Olvidaste tu contraseña?</a>

        </form>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript">

        $(document).ready(function () {

            $("#iptLogin").prop("disabled", false);
            $("#iptLogin").val("Ingresar");

            $("#frmCredentials").on("submit", function () {

                $("#iptLogin").prop("disabled", true);
                $("#iptLogin").val("Iniciando sesion...");

                var parameters = new FormData();

                parameters.append("Username", $("#iptUsername").val());
                parameters.append("Password", $("#iptPassword").val());
                parameters.append("Role", $("#sltRole").val());

                login(parameters);

                return false;
            });
        });

        function login(parameters) {

            jQuery.ajax({

                url: '@Url.Action("Login", "Access")',
                method: 'POST',
                data: parameters,
                cache: false,
                contentType: false,
                processData: false,
                success: function () { },
                error: function () {

                    window.open("@Url.Action("Error", "Home")", "_self");
                }
            });
        }

    </script>

</body>
</html>